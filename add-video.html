<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <style></style>
  </head>
  <body>
    <input type="text" placeholder="Enter YouTube video URL" id="yt-url" />
    <img id="preview" />
    <script type="module">
      document.getElementById("yt-url").addEventListener("change", (ev) => {
        const ytURL = ev.target.value;
        let url = new URL(ytURL);
        let searchParams3 = new URLSearchParams(url.search);
        let ytid = searchParams3.get("v");
        const ytThumbnail = `https://figma-community-api-proxy.vercel.app/api/proxy?endpoint=cors&urlToBeCORSED=https://i3.ytimg.com/vi/${ytid}/maxresdefault.jpg`;
        parent.postMessage({ pluginMessage: { ytThumbnail, ytURL } }, "*");
      });
    </script>
  </body>
</html>
